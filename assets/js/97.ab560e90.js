(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{703:function(s,t,e){"use strict";e.r(t);var v=e(11),a=Object(v.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"用户和组信息的查看"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#用户和组信息的查看"}},[s._v("#")]),s._v(" 用户和组信息的查看")]),s._v(" "),e("p",[s._v("在 "),e("code",[s._v("Linux")]),s._v(" 中，用户可分为三类: 超级用户(root), 普通用户，程序用户。")]),s._v(" "),e("ul",[e("li",[s._v("超级用户: uid=0")]),s._v(" "),e("li",[s._v("程序用户: uid=1-999")]),s._v(" "),e("li",[s._v("普通用户: uid=1000-9999")])]),s._v(" "),e("h2",{attrs:{id:"查看用户信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看用户信息"}},[s._v("#")]),s._v(" 查看用户信息")]),s._v(" "),e("blockquote",[e("p",[s._v("cat /etc/passwd   # /etc/passwd默认权限为644，其最小权限为444")])]),s._v(" "),e("p",[s._v("输出如:")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("root:x:0:0:root:/root:/bin/bash")])]),s._v(" "),e("li",[e("code",[s._v("yutiy:x:1000:1000::/home/yutiy:/bin/bash")])])]),s._v(" "),e("p",[s._v("用户信息显示的有 7 个字段，以 "),e("code",[s._v("root")]),s._v(" 为例:")]),s._v(" "),e("ul",[e("li",[s._v("用户名: root")]),s._v(" "),e("li",[s._v("密码占位符: 统一用 x 替代")]),s._v(" "),e("li",[s._v("用户id: uid -> 0")]),s._v(" "),e("li",[s._v("组id: gid -> 0")]),s._v(" "),e("li",[s._v("用户描述信息:")]),s._v(" "),e("li",[s._v("家目录: /root")]),s._v(" "),e("li",[s._v("登录shell: /bin/bash 表示可以登录，/sbin/nologin 表示不被授权登陆")])]),s._v(" "),e("h2",{attrs:{id:"查看密码信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看密码信息"}},[s._v("#")]),s._v(" 查看密码信息")]),s._v(" "),e("blockquote",[e("p",[s._v("cat /etc/shadow   # shadow默认权限为600，最小权限为400")])]),s._v(" "),e("p",[s._v("输出如:")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("root:$1$AKltJhnC$SsIJwBAj6v4DWzappfEhw/:18148:0:99999:7:::")])]),s._v(" "),e("li",[e("code",[s._v("yutiy:$1$uBwuy6ub$EjqbmhgBpHawh1esWUgaj/:18150:0:99999:7:::")])])]),s._v(" "),e("p",[s._v("密码信息显示的有 9 个字段，以 "),e("code",[s._v("root")]),s._v(" 为例:")]),s._v(" "),e("ul",[e("li",[s._v("用户名")]),s._v(" "),e("li",[s._v("密码: 通过sha-512加密，其中 "),e("code",[s._v("*")]),s._v(" 表示该用户禁用，"),e("code",[s._v("!!")]),s._v(" 表示用户密码未初始化，如果为空，表示密码为")]),s._v(" "),e("li",[s._v("最后一次修改密码距离1970年1月1日的天数间隔")]),s._v(" "),e("li",[s._v("密码最短有效期")]),s._v(" "),e("li",[s._v("密码最长有效期")]),s._v(" "),e("li",[s._v("密码过期前几天进行警告")]),s._v(" "),e("li",[s._v("账户过期后，被锁定的天数")]),s._v(" "),e("li",[s._v("账号失效时间距离1970年1月1日的天数间隔")]),s._v(" "),e("li",[s._v("未分配功能")])]),s._v(" "),e("h2",{attrs:{id:"查看组信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看组信息"}},[s._v("#")]),s._v(" 查看组信息")]),s._v(" "),e("blockquote",[e("p",[s._v("cat /etc/group")])]),s._v(" "),e("p",[s._v("输出如:")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("root:x:0:")])]),s._v(" "),e("li",[e("code",[s._v("wheel:x:10:yutiy")])]),s._v(" "),e("li",[e("code",[s._v("yutiy:x:1000:")])])]),s._v(" "),e("p",[s._v("组信息显示的有 4 个字段，以 "),e("code",[s._v("root")]),s._v(" 为例:")]),s._v(" "),e("ul",[e("li",[s._v("组名称: root")]),s._v(" "),e("li",[s._v("组密码占位符: 统一用 x 替代")]),s._v(" "),e("li",[s._v("组id")]),s._v(" "),e("li",[s._v("组成员")])]),s._v(" "),e("p",[e("strong",[s._v("注:")]),s._v(" 一个用户只能拥有一个主要组，最多可拥有31个附加组。主要组是用户创建文件时默认的的所属组，附加组主要用来权限管理。")]),s._v(" "),e("h2",{attrs:{id:"特殊组wheel-管理员的组"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#特殊组wheel-管理员的组"}},[s._v("#")]),s._v(" 特殊组wheel -> 管理员的组")]),s._v(" "),e("p",[s._v("将普通用户加入到 wheel 组中，被加入的这个普通用户就成了管理员组内的用户了，然后可以修改配置文件使得只有 wheel 组内的用户可以切换到 root 用户，这样可以避免一些不必要的安全隐患。")]),s._v(" "),e("h1",{attrs:{id:"用户和组信息管理-etc-login-defs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#用户和组信息管理-etc-login-defs"}},[s._v("#")]),s._v(" 用户和组信息管理("),e("code",[s._v("/etc/login.defs")]),s._v(")")]),s._v(" "),e("h2",{attrs:{id:"用户管理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#用户管理"}},[s._v("#")]),s._v(" 用户管理")]),s._v(" "),e("blockquote",[e("p",[s._v("新建用户时系统会做的三件事:")])]),s._v(" "),e("ul",[e("li",[s._v("将 "),e("code",[s._v("/etc/skel")]),s._v(" 中的目录及文件拷贝到新建用户的家目录中")]),s._v(" "),e("li",[s._v("在 "),e("code",[s._v("/var/spool/mail")]),s._v(" 中新建用户名的邮箱")]),s._v(" "),e("li",[s._v("在 "),e("code",[s._v("/etc")]),s._v(" 下的 "),e("code",[s._v("passwd, shadow, group")]),s._v(" 中增加用户信息")])]),s._v(" "),e("blockquote",[e("p",[s._v("添加用户时可指定的参数")])]),s._v(" "),e("ul",[e("li",[s._v("用户组: "),e("code",[s._v("-g")]),s._v(" 指定")]),s._v(" "),e("li",[s._v("附加组: "),e("code",[s._v("-G")]),s._v(" 指定")]),s._v(" "),e("li",[s._v("用户id: "),e("code",[s._v("-u")]),s._v(" 指定")]),s._v(" "),e("li",[s._v("家目录: "),e("code",[s._v("-d")]),s._v(" 指定")]),s._v(" "),e("li",[s._v("创建的用户没有登录系统的权限: "),e("code",[s._v("-s /sbin/nologin")]),s._v(" 指定")])]),s._v(" "),e("blockquote",[e("p",[s._v("删除用户")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("userdel")]),s._v(" -r yutiy    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除用户家目录和邮箱，同时删除 passwd、shadow 和 group 文件中的用户信息")]),s._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("userdel")]),s._v(" yutiy      "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只删除 passwd、shadow 和 group 文件中的用户信息")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("blockquote",[e("p",[s._v("修改账户密码")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[s._v("name 为 "),e("code",[s._v("root")]),s._v(": 不需要知道当前的密码,并且不需要进行密码校验")]),s._v(" "),e("li",[s._v("name 为 普通用户: 需要知道当前密码，进行密码校验(1.不能少于8个字符，2.满足复杂度要求)")])]),s._v(" "),e("blockquote",[e("p",[s._v("修改账户属性")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("usermod")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("options"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("options参数说明:")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("-s")]),s._v(": 修改用户的登陆shell")]),s._v(" "),e("li",[e("code",[s._v("-L")]),s._v(": 账户锁定")]),s._v(" "),e("li",[e("code",[s._v("-U")]),s._v(": 账户解锁")]),s._v(" "),e("li",[e("code",[s._v("-g")]),s._v(": 修改账户所在组")]),s._v(" "),e("li",[e("code",[s._v("-G")]),s._v(": 给账户添加附加组，不加 "),e("code",[s._v("-a")]),s._v(" 的话就是替换")]),s._v(" "),e("li",[e("code",[s._v("-a")]),s._v(": 默认情况下，当用户已经存在附加组时，再添加附加组则会把之前的附加组给替换了，加 -a 参数，则不替换原来的附加组，意味着该用户可以有多个附加组")])]),s._v(" "),e("blockquote",[e("p",[s._v("锁定和解锁用户")])]),s._v(" "),e("ul",[e("li",[s._v("锁定用户: "),e("code",[s._v("usermode -L yutiy")]),s._v(" 或 "),e("code",[s._v("passwd -L yutiy")])]),s._v(" "),e("li",[s._v("解锁用户: "),e("code",[s._v("usermode -U yutiy")]),s._v(" 或 "),e("code",[s._v("passwd -U yutiy")])]),s._v(" "),e("li",[s._v("查看用户状态: "),e("code",[s._v("passwd -S yutiy")])])]),s._v(" "),e("p",[e("code",[s._v("usermod")]),s._v(" 与 "),e("code",[s._v("passwd")]),s._v(" 的区别:")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("passwd")]),s._v(" 命令操作完会有提示")]),s._v(" "),e("li",[e("code",[s._v("passwd")]),s._v(" 比 "),e("code",[s._v("usermod")]),s._v(" 权限要大，使用 "),e("code",[s._v("usermod")]),s._v(" 锁定的用户可以用 "),e("code",[s._v("passwd")]),s._v(" 来解锁，但是使用 "),e("code",[s._v("passwd")]),s._v(" 锁定的用户不能用 "),e("code",[s._v("usermod")]),s._v(" 来解锁")])]),s._v(" "),e("h2",{attrs:{id:"组管理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#组管理"}},[s._v("#")]),s._v(" 组管理")]),s._v(" "),e("blockquote",[e("p",[s._v("添加组")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupadd")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("options"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("options可用参数如下:")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("-g, --gid")]),s._v(": 为新组使用设置 gid")]),s._v(" "),e("li",[e("code",[s._v("-K, --key")]),s._v(": 不使用 "),e("code",[s._v("/etc/login.defs")]),s._v(" 中的默认值")]),s._v(" "),e("li",[e("code",[s._v("-o, --non-unique")]),s._v(": 允许创建有重复 gid 的组")]),s._v(" "),e("li",[e("code",[s._v("-p, --password")]),s._v(":  为新组使用此加密过的密码")]),s._v(" "),e("li",[e("code",[s._v("-r, --system")]),s._v(": 创建一个系统账户")])]),s._v(" "),e("blockquote",[e("p",[s._v("删除组")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupdel")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("-r, --remove"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -r表示删除主目录和邮件池，只能删除附加组，而不能删除主组!!!")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[s._v("修改组")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupmod")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("options"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("options可用参数如下:")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("-g, --gid GID")]),s._v(": 修改组id")]),s._v(" "),e("li",[e("code",[s._v("-n, --new-name")]),s._v(": 修改组名称")]),s._v(" "),e("li",[e("code",[s._v("-o, --non-unique")]),s._v(": 允许使用重复的 gid")])]),s._v(" "),e("blockquote",[e("p",[s._v("修改组中的用户")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ groupmems -a yutiy -g wheel     "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将用户 yutiy 加入到 wheel 组中")]),s._v("\n$ groupmems -d yutiy -g wheel     "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将用户 yutiy 从 wheel 组中删除，也可使用 gpasswd -d yutiy wheel 进行删除")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h1",{attrs:{id:"文件权限"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#文件权限"}},[s._v("#")]),s._v(" 文件权限")]),s._v(" "),e("h2",{attrs:{id:"查看文件权限"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看文件权限"}},[s._v("#")]),s._v(" 查看文件权限")]),s._v(" "),e("p",[s._v("使用 "),e("code",[s._v("ls -al")]),s._v(" 可以查看文件的具体信息，如:")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("-rw------- 1 root root 8574 9月 11 17:18 .bash_history")])]),s._v(" "),e("li",[e("code",[s._v("-rw-r--r--. 1 root root 18 12月 29 2013 .bash_logout")])])]),s._v(" "),e("p",[s._v("以 "),e("code",[s._v("bash_logout")]),s._v(" 为例,解释如下:")]),s._v(" "),e("ul",[e("li",[s._v("第一个字符代表文件（-）、目录（d），链接（l） 设备（C） 块设备（b）")]),s._v(" "),e("li",[s._v("第一组rw：文件所有者的权限是读、写")]),s._v(" "),e("li",[s._v("第二组r--：与文件所在组同一组的用户的权限是读")]),s._v(" "),e("li",[s._v("第一组r--：不与文件所有者同组的其他用户的权限是读")]),s._v(" "),e("li",[s._v("ACL扩展权限: "),e("code",[s._v(".")]),s._v("表示没有扩展权限，"),e("code",[s._v("+")]),s._v(" 表示有")])]),s._v(" "),e("h2",{attrs:{id:"文件权限修改"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#文件权限修改"}},[s._v("#")]),s._v(" 文件权限修改")]),s._v(" "),e("blockquote",[e("p",[s._v("修改文件权限 chmod")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("755")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("                        "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 赋予 test 权限 rwxr-xr-x")]),s._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("u")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rwx, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("g")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rx, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("o")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rx "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("         "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 赋予 test 权限 rwxr-xr-x。u=用户权限，g=组权限，o=不同组其他用户权限")]),s._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" u-x, g+w "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("                   "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 给 test 去除用户执行的权限，增加组写的权限")]),s._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" a+r "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("                        "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 给所有用户添加读的权限")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("blockquote",[e("p",[s._v("修改文件的所有者 chown 和 所属组 chgrp")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# `-R` 表示递归修改文件夹的文件的所属组或所有者")]),s._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R yutiy "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("         "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改 test 的所有者为 yutiy")]),s._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chgrp")]),s._v(" -R wheel "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("         "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改 test 的所属组为 wheel")]),s._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R yutiy:wheel "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("   "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改 test 的所有者为 yutiy，所属组为 wheel")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h2",{attrs:{id:"acl控制权限-setfacl-getfacl"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#acl控制权限-setfacl-getfacl"}},[s._v("#")]),s._v(" ACL控制权限 "),e("code",[s._v("setfacl, getfacl")])]),s._v(" "),e("p",[e("code",[s._v("setfacl")]),s._v("设置文件访问控制规则，参数如下:")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("-m")]),s._v(": 给文件添加扩展ACL规则，"),e("em",[s._v("setfacl -m u:yutiy:r test")])]),s._v(" "),e("li",[e("code",[s._v("-x")]),s._v(": 给文件移除扩展ACL规则，"),e("em",[s._v("setfacl -x u:yutiy test")])]),s._v(" "),e("li",[e("code",[s._v("-b")]),s._v(": 移除文件的所有ACL规则，"),e("em",[s._v("setfacl -b u:yutiy test")])]),s._v(" "),e("li",[e("code",[s._v("-R")]),s._v(": 递归对所有目录内的所有文件和目录进行操作，"),e("em",[s._v("setfacl —R -m u:yutiy:r test")])]),s._v(" "),e("li",[e("code",[s._v("-d")]),s._v(": 设置默认的ACL规则")])]),s._v(" "),e("p",[s._v("用 "),e("code",[s._v("root")]),s._v(" 用户新建一个文件 "),e("code",[s._v("test.txt")]),s._v(", 其权限为: "),e("strong",[s._v("-rw-r--r-- 1 root root 4 Sep 12 10:30 test.txt")])]),s._v(" "),e("blockquote",[e("p",[s._v("getfacl test.txt")])]),s._v(" "),e("p",[s._v("输出信息如下:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# file: test.txt")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# owner: root")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# group: root")]),s._v("\nuser::rw-\ngroup::r--\nother:r--\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("可见其他用户对其只有查看权限，现在让用户 "),e("code",[s._v("yutiy")]),s._v(" 拥有 "),e("code",[s._v("rw")]),s._v(" 权限，别的用户不变:")]),s._v(" "),e("blockquote",[e("p",[s._v("setfacl -m u:yutiy:rw test.txt")])]),s._v(" "),e("p",[s._v("设置完ACL权限后，文件 "),e("code",[s._v("test.txt")]),s._v(" 的组权限位发生变化，就变成: "),e("strong",[s._v("-rw-rw-r--+ 1 root root 4 Sep 12 10:30 test.txt")])]),s._v(" "),e("blockquote",[e("p",[s._v("getfacl test.txt")])]),s._v(" "),e("p",[s._v("输出信息如下:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# file: test.txt")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# owner: root")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# group: root")]),s._v("\nuser::rw-\nuser:yutiy:rw-    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用户 yutiy 的 ACL 权限")]),s._v("\ngroup::r--\nmask::rw-         "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用户之前的权限与 ACL 设置的权限进行运算")]),s._v("\nother:r--\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h2",{attrs:{id:"umask、suid、sgid、粘滞位"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#umask、suid、sgid、粘滞位"}},[s._v("#")]),s._v(" umask、suid、sgid、粘滞位")]),s._v(" "),e("blockquote",[e("p",[s._v("umask")])]),s._v(" "),e("p",[s._v("umask 值是可以手动修改的，root用户的 umask 值默认为 "),e("code",[s._v("0022")]),s._v(", 普通用户的 umask 值默认 "),e("code",[s._v("0002")]),s._v("。其中第一位是特殊位，配置了 "),e("code",[s._v("suid(4)、sgid(2)、粘滞位(1)")]),s._v(" 才有值。")]),s._v(" "),e("p",[s._v("root用户和普通用户不同之处在于root用户的属组位置的 "),e("code",[s._v("w")]),s._v(" 只在自己手中，而普通用户的属组权限只要是和它一个组内，就拥有 "),e("code",[s._v("w")]),s._v(" 权限：")]),s._v(" "),e("ul",[e("li",[s._v("root 用户去创建一个文件夹的时候，其权限是 "),e("code",[s._v("777-022=755")]),s._v(", 而创建一个文件的时候，其权限就是 "),e("code",[s._v("755-111=644")])]),s._v(" "),e("li",[s._v("普通用户去创建一个文件夹的时候，其权限是 "),e("code",[s._v("777-002=775")]),s._v(", 而创建一个文件的时候，其权限就是 "),e("code",[s._v("775-111=664")])])]),s._v(" "),e("blockquote",[e("p",[s._v("suid")])]),s._v(" "),e("p",[s._v("当设置了 "),e("code",[s._v("suid")]),s._v(" 后，"),e("code",[s._v("umask")]),s._v(" 第一位为 4，其出现在文件所属主权限的执行位上面，标志为"),e("code",[s._v("s")]),s._v("。\n其作用是让执行该命令的用户以该命令拥有者的权限去执行，比如说当普通用户执行 "),e("code",[s._v("passwd")]),s._v(" 时会拥有 "),e("code",[s._v("root")]),s._v(" 权限，这样就可以修改 "),e("code",[s._v("/etc/passwd")]),s._v(" 这个文件。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" -al /bin/vim\n-rwxr-xr-x "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" Sep "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" /bin/vim\n\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" u+s /bin/vim\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" -al /bin/vim\n-rwsr-xr-x "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" Sep "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" /bin/vim\n\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" u-s /bin/vim\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" -al /bin/vim\n-rwxr-xr-x "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" Sep "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" /bin/vim\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("使用"),e("code",[s._v("suid")]),s._v("需要满足一下几个条件:")]),s._v(" "),e("ul",[e("li",[s._v("suid只对可执行文件有效")]),s._v(" "),e("li",[s._v("调用者对该文件拥有执行权")]),s._v(" "),e("li",[s._v("在执行过程中，调用者会暂时获得搞文件的所有者权限，并且只在程序执行过程中有效")])]),s._v(" "),e("blockquote",[e("p",[s._v("sgid -> chmod g+s /test")])]),s._v(" "),e("p",[s._v("当设置了 "),e("code",[s._v("sgid")]),s._v(" 后，"),e("code",[s._v("umask")]),s._v(" 第一位为2，它作用于目录，其出现在文件所属组权限的执行位上面，标志位为"),e("code",[s._v("s")]),s._v("。")]),s._v(" "),e("p",[s._v("当用户 a 对某一目录有 rwx 权限时，该用户就可以在该目录下简历文件，新建文件的所属和所属组继承自 a。当另一个用户也对该目录拥有 rwx 权限时，就可以修改用户 a 创建的文件，而且修改后文件的所属和所属组都会变成 b!!! 但是如果该目录用 sgid 修饰，则所有拥有 rwx 权限的用户在这个目录下简历的文件都是属于这个目录所属的组。当其他用户修改时，有三种情况:")]),s._v(" "),e("ul",[e("li",[s._v("当两个用户都是属于 group 组，则修改后的文件的所属和所属组都不变，而且修改文件不是提示 readonly，可以正常修改")]),s._v(" "),e("li",[s._v("当两个用户都是属于 other 组，则修改后的文件的所属组不变，所属会变成另一个用户，修改文件时提示 readonly，必须强制保存退出")]),s._v(" "),e("li",[s._v("当一个用户是 group 组，另一个是 other 组，则修改后的文件的所属组不变，所属会变成另一个用户，修改文件时提示 readonly，必须强制保存退出")])]),s._v(" "),e("blockquote",[e("p",[s._v("粘滞位 -> chmod o+t /test")])]),s._v(" "),e("p",[s._v("当设置了粘滞位后，"),e("code",[s._v("umask")]),s._v(" 第一位为1，它只能用来修饰一个目录，出现在其他用户权限的执行位("),e("code",[s._v("必须有可执行权限")]),s._v("))上，标志位为"),e("code",[s._v("t")]),s._v("。")]),s._v(" "),e("p",[s._v("当某一个目录拥有粘滞位权限时，则任何一个能够在这个目录下建立文件的用户，只有该用户自己和 root 可以修改和删除，其他用户不可以修改和删除，")]),s._v(" "),e("h1",{attrs:{id:"linux中的-sudo、sudo-i、su、su-i-命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#linux中的-sudo、sudo-i、su、su-i-命令"}},[s._v("#")]),s._v(" linux中的 "),e("code",[s._v("sudo、sudo -i、su、su -i")]),s._v(" 命令")]),s._v(" "),e("p",[e("strong",[s._v("只有指定的一些用户才具有执行 "),e("code",[s._v("sudo")]),s._v(" 的权限，具体配置在 "),e("code",[s._v("/etc/sudoers")]),s._v(" 文件中")]),s._v("，两个方法可以做到:")]),s._v(" "),e("ul",[e("li",[s._v("将改用户加入到 "),e("code",[s._v("wheel")]),s._v(" 组中（因为 "),e("code",[s._v("/etc/sudoers")]),s._v(" 中默认加入了 "),e("code",[s._v("wheel")]),s._v(" 组中的用户可以使用 "),e("code",[s._v("sudo")]),s._v(" 权限）")]),s._v(" "),e("li",[s._v("在 "),e("code",[s._v("/etc/sudoers")]),s._v(" 文件中加入 "),e("code",[s._v("yutiy ALL=(ALL) ALL")])])]),s._v(" "),e("blockquote",[e("p",[s._v("sudo")])]),s._v(" "),e("p",[s._v("暂时切换到超级用户以执行超级用户权限，提示输入密码时为当前用户密码。缺点是每次执行超级用户权限都要在命令前加上 "),e("code",[s._v("sudo")]),s._v("，优点是在当前终端再使用 "),e("code",[s._v("sudo")]),s._v(" 不再要重新输入密码")]),s._v(" "),e("blockquote",[e("p",[s._v("sudo -i")])]),s._v(" "),e("p",[s._v("为了频繁的执行某些只有超级用户才能执行的权限，而不用每次输入密码，可以使用该命令。提示输入密码时为当前用户密码，没有时间限制。执行命令后提示符变为 "),e("code",[s._v("#")]),s._v(" 而不是 "),e("code",[s._v("$")]),s._v("，想要退回普通账户时可以执行 "),e("code",[s._v("exit")]),s._v(" 或 "),e("code",[s._v("logout")])]),s._v(" "),e("blockquote",[e("p",[s._v("su")])]),s._v(" "),e("p",[s._v("切换到某某用户模式，提示输入密码时的密码为切换后账户的密码，用法为 "),e("code",[s._v("su 账户名称")]),s._v(", 如果不加账户名称则默认为 "),e("code",[s._v("root")]),s._v("，没有时间限制")]),s._v(" "),e("blockquote",[e("p",[s._v("su -")])]),s._v(" "),e("p",[s._v("和 "),e("code",[s._v("su")]),s._v(" 的不同之处在于，"),e("code",[s._v("su -")]),s._v("切换后的目录为切换后目录的家目录，而 "),e("code",[s._v("su")]),s._v(" 则是原始目录")])])}),[],!1,null,null,null);t.default=a.exports}}]);