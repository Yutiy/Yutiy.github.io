---
title: '实现instanceof'
date: 2020-03-26
permalink: 'js_deep/instanceof'
tag:
  - javascript基础系列
categories:
  - javascript基础系列
---

`instanceof` 操作符用于判断左边的原型是否存在于右边的原型链中。

## 实现

```js
const instanceof = function(left, right) {
  if (typeof right !== 'function') throw new Error('instance error');
  if (typeof left !== 'object' || !left) return false;

  left = left.__proto__;        // 获取对象的原型，也可以用 Object.getPrototypeOf(left) 进行获取
  let proto = right.prototype;  // 获取类型的原型

  while(true) {
    if (left === null) return false;
    if (left === proto) return true;
    left = left.__proto__;
  }
}
```
