---
title: '柯里化'
date: 2020-03-26
permalink: 'js_topic/currying'
tag:
  - javascript专题系列
categories:
  - javascript专题系列
---

## 初步封装

```js
const currying = function(fn) {
  var args = Array.prototype.slice.call(arguments, 1)
  return function() {
    var newArgs = args.concat(Array.prototype.slice.call(arguments))
    return fn.apply(this, newArgs)
  }
}
```

##

add(1, 2, 3)
add(1, 2)(3)
add(1)(2, 3)

```js
const add = function() {
  let allArgs = Array.prototype.slice.call(arguments)
  const fn = function() {
    allArgs.push(...arguments)
    return fn
  }

  // 重写 toString 方法，函数执行的时候会自动调用toString()方法，计算返回所有参数结果
  fn.toString = function() {
    return allArgs.reduce((a, b) => a + b)
  }

  return fn;
}
```
