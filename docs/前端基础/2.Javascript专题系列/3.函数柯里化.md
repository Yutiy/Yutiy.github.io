---
title: '柯里化'
date: 2020-03-26
permalink: 'js_topic/currying'
tag:
  - javascript专题系列
categories:
  - javascript专题系列
---

## 初步封装

```js
const currying = function(fn) {
  var args = Array.prototype.slice.call(arguments, 1)
  return function() {
    var newArgs = args.concat(Array.prototype.slice.call(arguments))
    return fn.apply(this, newArgs)
  }
}
```

##

add(1, 2, 3)
add(1, 2)(3)
add(1)(2, 3)

```js
const add = function() {
  let allArgs = Array.prototype.slice.call(arguments)
  const fn = function() {
    allArgs.push(...arguments)
    return fn
  }

  // 重写 toString 方法，函数执行的时候会自动调用toString()方法，计算返回所有参数结果
  fn.toString = function() {
    return allArgs.reduce((a, b) => a + b)
  }

  return fn;
}

const curry = (fn, ...args) =>
  args.length < fn.length
  // 参数长度不足时,重新柯里化函数,等待接受新参数
  ? (...arguments) => curry(fn, ...args, ...arguments)
  // 函数长度满足时,执行函数
    : fn(...args);

function sumFn(a, b, c){
  return a + b + c;
}

var sum = curry(sumFn);
console.log(sum(1)(2)(3)); // 6
```
