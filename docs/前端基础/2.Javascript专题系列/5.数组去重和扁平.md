---
title: '数组去重和扁平'
date: 2020-03-26
permalink: 'js_topic/unique_flat'
tag:
  - javascript专题系列
categories:
  - javascript专题系列
---

## 数组扁平化

```js
// recursion
function recursionFlat(arr) {
  const res = []
  arr.forEach(item => {
    if (Array.isArray(item)) {
      res.push(...recursionFlat(item))
    } else {
      res.push(item)
    }
  })
  return res
}

// reduce
function reduceFlat(arr) {
  return arr.reduce((res, item) => res.concat(Array.isArray(item) ? reduceFlat(item) : item), [])
}
```

## 对象扁平化

```js
function objectFlat(obj = {}) {
  const res = {}
  function flat(item, preKey = '') {
    Object.entries(item).forEach(([key, val]) => {
      const newKey = preKey ? `${preKey}.${key}` : key
      if (val && typeof val === 'object') {
        flat(val, newKey)
      } else {
        res[newKey] = val
      }
    })
  }
  flat(obj)
  return res
}
```