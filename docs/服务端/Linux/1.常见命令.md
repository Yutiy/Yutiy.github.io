---
title: 'linux常见命令'
date: 2020-03-26
permalink: 'linux/command'
tag:
  - linux
categories:
  - linux
---

## 显示当前用户和组的标识 -> id

```bash
id                  # 显示当前用户的 id(uid)、组id(gid)以及其所属的组
id -u               # 将当前用户标识显示为纯数字
id -g               # 将当前组标识显示为纯数字
id {{username}}     # 显示指定用户的 id(uid)、组id(gid)以及其所属的组
```

## 在给定目录树中递归查找文件或目录 -> find

```bash
find {{root_path}} -name '{{*.ext}}'                                      # 查找特定后缀的文件
find {{root_path}} -name '{{*pattern_1*}}' -or -name '{{*pattern_2*}}'    # 查找匹配多个模式之一的文件
find {{root_path}} -type d -name {{*lib*}}                                # 查找匹配给定名称的目录
find {{root_path}} -name '{{*.ext}}' -exec {{wc -l {}}}                   # 对搜索到的每一个文件执行一个命令，在要执行的命令中使用 `{}` 表示搜索到的文件名
find {{root_path}} -mtime {{-1}}                                          # 查找最近 24 小时内内被修改过的文件
find {{root_path}} -size {{+500k}} -size {{-10M}} -iname '{{*.tar.gz}}'   # 按指定文件大小，且大小谢敏感来匹配文件名进行文件查找
find {{root_path}} -name '{{*.ext}}' -mtime {{-180}} -delete              # 删除符合文件名称模式，且上次修改后超过 180 天的文件
find {{root_path}} -name '{{*.py}}' -not -path '{{*/size-packages/*}}'    # 查找匹配给定模式的文件，并且在查找时排除某些特定路径
```

## 匹配输入文本中的模式 -> grep

```bash
# `-i` -> 忽略大小写，`-R` -> 忽略大小写
grep {{search_string}} {{path/to/file}}                 # 搜索特定的字符串,
grep -Hn {{search_string}} {{path/to/file}}             # 打印每次匹配结果的文件名及对应行数
grep -v {{search_string}}                               # 打印不匹配 `search_string` 的字符串

grep -{{C|B|A}} 3 {{search_string}} {{path/to/file}}    # 打印匹配字符串附近三行的内容，包括每次匹配的前一行和后一行
grep -E {{^regexp$}} {{path/to/file}}                   # 使用扩展的正则表达式搜索(支持`?、+、{}、[]、|`)
```

## 显示磁盘空间信息 -> df

```bash
df                    # 显示所有文件系统和磁盘使用率信息
df -h                 # 以可读形式显示所有文件系统及其磁盘使用情况
df {{path/to/file_or_folder}}   # 显示包含给定文件或文件夹的文件系统及其磁盘使用情况
```

## 磁盘使用率(估计和汇总文件、文件夹空间使用率) -> du

```bash
du -{{b|k|m} {{path/to/folder}}}              # 列出给定文件夹及其子文件夹的大小(使用给定单位 b/kb/mb)
du -h {{path/to/folder}}                      # 以可读形式列出文件夹和任何子文件夹的大小(自动为每个大小选择适当的单位)
du -sh {{path/to/folder}}                     # 用可读的方式显示单个文件夹的大小
du -ah {{path/to/folder}}                     # 以可读的方式显示一个文件夹及其里面所有文件和文件夹的大小
du -h --max-depth=N                           # 显示指定目录和子目录的大小，N 指定子目录深度
du -ch */*.jpg                                # 列出当前目录下所有子目录下所有以 .jpg 结尾的文件，并以合适的单位显示占用的空间大小
```

## 显示运行进程的信息 -> ps

```bash
ps -ef                              # 以一个完整的列表显示当前运行的每一个进程信息
ps -aux                             # 列出当前所有正在运行的进程
ps -aux | grep {{string}}           # 查找匹配指定字符串 string 的进程
ps --user $(id -u) -F               # 列出当前用户的所有进程的全部信息
ps --user $(id -u) -f               # 以树状形式列出当前用户的所有进程
ps -o ppid= -p {{pid}}              # 获得进程的父进程 pid
```

## 动态显示运行中的实时信息 -> top

```bash
top                 # 启动top
top -i              # 不显示任何空闲或僵尸进程
top -u {{用户名}}}   # 显示指定用户运行的进程
top -p $(pgrep -d ',' {{进程名}})     # 仅显示指定 pid 列表(逗号分隔) 的进程。
```

## 终止进程 -> kill

```bash
kill {{process_id}}                 # 终止一个指定程序 id 的进程
kill -l                             # 列出有效的信号名称(去掉 SIG 前缀可直接用作本命令开关)
kill -{{1|HUP}} {{process_id}}      # 挂起一个程序，许多守护进程将会重载配置而不是终止
kill -{{2|INT}} {{process_id}}      # 中断一个程序，通常是用户按下 `Ctrl + C` 触发的
kill -{{9|KILL}} {{process_id}}     # 终止指定程序
kill -{{17|STOP}} {{process_id}}    # 通知操作系统暂停一个程序，直到收到一个 SIGCONT(继续) 信号
kill -{{SIGUSR1}} -{{group_id}}     # 给指定 gid 的所有进程发送 SIGUSR1 信号
```

## 显示网络相关的信息 -> netstat

```bash
# `-a` -> 所有端口信息
# `-l` -> 正在监听的端口信息
# `-t` -> tcp 监听的端口信息
# `-p` -> 进程的 pid 和进程名
# `-c` -> 持续列出网络状态
# `-lepunt` -> 列出正在监听的 tcp 和 udp 端口(root 身份运行该命令还会同时列出用户和进程)
netstat -nr   # 列出路由表信息
```

## 压缩、解压缩

```bash
# zip
zip {{target.zip}} {{file}}     # 压缩文件
zip -r {{target.zip}} {{source}}   # 压缩目录
unzip {{source.zip}}            # 解压

# tar
tar -cf {{target.tar} {{file1 file2 file3}}}          # 从文件创建归档
tar -czf {{target.tar.gz}} {{file1 file2 file3}}      # 创建一个压缩的归档
tar -xf {{source.tar} -C {{folder}}}                  # 提取文档至目标文件夹中
tar -xzf {{source.tar.gz}}                            # 将 gzip 压缩的归档文件压缩到当前目录
tar -xjf {{source.tar.bz2}}                           # 将 bzip 压缩的归档文件提取到当前目录
tar -caf {{target.tar.xz}} {{file1 file2 file3}}      # 创建一个压缩的归档文件，使用归档文件后缀来确定使用的压缩程序
tar -tvf {{source.tar}}                               # 列出归档文件的内容
tar -xf {{source.tar}} --wildcards {{"*.html"}}       # 提取与模式匹配的文件
```

## 修改文件日期

```bash
touch {{filename}}                                  # 创建一个新的空文件
touch -t {{YYYYMMDDHHMM.SS}} {{filename}}           # 将文件的修改时间设置为特定的日期和时间
touch -r {{filename}} {{filename2}}                 # 使用第一个文件的最后修改时间设置到第二个文件上
```

## 链接文件

```bash
ln -s {{path/to/file_or_dir} {{path/to/symlink}}}     # 为文件或目录创建一个软连接
ln -sf {{path/to/new_file}} {{path/to/symlink}}       # 覆盖现有符号并指向其他文件
ln {{path/to/file} {{path/to/hardlink}}}              # 为文件创建一个硬链接
```

## 显示文件头部 -> head

```bash
head -n {{count_of_lines}} {{filename}}       # 输出文件的开头部分内容，`-n` 指定输出的行数
head -n -{{count_of_lines}} {{filename}}      # 输出文件的最后几行以外的内容
head -c {{size_in_bytes}} {{filename}}        # 输出文件开始的一些字节
head -c -{{size_in_bytes}} {{filename}}       # 输出文件的最后几个字节以外的内容
```

## 显示文件尾部 -> tail

```bash
tail -n {{num}} {{file}}    # 显示文件最后的 num 行
tail -n +{{num}} {{file}}   # 从 num 行开始显示文件的全部内容
tail -c {{num} {{file}}}    # 保持查看文件内容，`Ctrl + C` 结束
tail -F {{file}}            # 持续显示阅读文件的内容，直到按住 `Ctrl + C`，即使文件在滚动(翻页)
```

## 显示当前登录用户及相关信息(进程、启动时间等) -> who

```bash
who                 # 显示当前所有的登录会话的用户名、终端和时间
who am i            # 仅显示当前终端会话的信息
who -a              # 显示全部可用信息
who -a -H           # 用表格标题显示所有可用信息
```

## 统计文件字数 -> wc

```bash
wc -l {{file}}        # 统计文件中的行数
wc -w {{file}}        # 统计文件字数(单词数量、英文)
wc -c {{file}}        # 统计文件字符数
wc -m {{file}}        # 统计文件中的字符数(多字节字符考虑在内)
```

## 显示日历

```bash
cal                           # 显示当前月份的日历
cal -3                        # 显示上个月，当月，下一月的信息
cal --monday                  # 使用周一作为每周的第一天
cal {{year}}                  # 显示指定年份的日历信息
cal {{month}} {{year}}        # 显示指定月份、年份的日历信息
```
