---
title: 'jest自动化测试原理'
date: 2020-03-25
permalink: 'jest/principle'
tag:
  - jest
categories:
  - jest
---

## 准备测试函数

```js
function add(a, b) {
  return a + b;
}

function minus(a, b) {
  return a - b;
}
```

## 构造expect函数

```js
function expect(result) {
  return {
    toBe: function(actual) {
      if (result !== actual) {
        throw new Error(`预期值和实际值不相等 预期 ${actual} 结果却是 ${result}`);
      }
    }
  }
}
```

## 构造test函数

```js
function test(desc, callback) {
  try {
    callback();
    console.log(`${desc} 通过测试`);
  } catch(e) {
    console.log(`${desc} 没有通过测试, ${e}`);
  }
}
```

## 进行单元测试

```js
test('测试加法 3 + 7', () => {
  expect(add(3, 7)).toBe(10)
});

test('测试减法 3 - 3', () => {
  expect(minus(3, 3)).toBe(0)
});
```